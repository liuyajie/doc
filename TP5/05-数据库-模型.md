#### 零、定义

1、配置

​	User类，对应数据库中tp_user表，UserType类对应tp_user_type表。如下所示。

```php
# php think make:model common/User 自动生成一个User Model类
# /application/common/User.php
<?php
namespace app\common\model;

use think\Model;

class User extends Model
{
    
}
```

```php
# User Model的基础配置信息
<?php
namespace app\common\model;

use think\Model;

class User extends Model
{
    /**
     * 指定tp_user的表名
     * @var string
     */
    protected $table = 'tp_user';

    /**
     * 指定tp_user的主键名称，默认是id
     * @var string
     */
    protected $pk = 'id';

    /**
     * 指定写入的字段，比如说有些字段，不让用户自己写入，系统会帮你写入的
     * 比如：创建时间，创建人，修改时间，修改人之类的
     * @var array
     */
    protected $field = ['username', 'password', 'email'];
    
    /**
     * 初始化方法，定义模型事件，用来记录日志
     */
    protected static function init()
    {
        parent::init();

        self::event('after_insert', function ($user) {
            echo 'after insert.' . '<br/>';
        });
        self::event('after_update', function ($user) {
            echo 'after update.' . '<br/>';
        });
        self::event('after_write', function ($user) {
            echo 'after write.' . '<br/>';
        });
        self::event('after_delete', function ($user) {
            echo 'after delete.' . '<br/>';
        });
    }
}
```

#### 一、增

```php
// 1、实例化新增，会触发模型事件，不常用
$user = new User();
$user->username = 'lyj';
$user->save(); // 新增，因为没有发现主键
$user->save(); // 修改，发现有主键然后查询一次数据库，比对数据发现没有差异，不执行修改
$user->isUpdate(false)->save(); // 新增，可以强制指定save是新增
$user->isUpdate(true)->save(); // 修改，可以强制指定save修改，发现有主键查询一次数据库，比对数据发现没有差异，不执行修改

// 2、实例化时，传入数据，会触发模型事件，不会触发获取器设置器等，最垃圾的方式
$user = new User(['username'=>'lyj']);
$user->save();// 新增，因为没有发现主键
$user->save();// 修改，发现有主键然后查询一次数据库，比对数据发现没有差异，不执行修改
$user->isUpdate(false)->save(); // 新增，因为强制指定save是新增

// 3、实例化新增，把数据传给save方法，偶尔可能或许会用
$user = new User();
$user->save(['username'=>'lyj']);// 新增
$user->save();// 修改，发现有主键然后查询一次数据库，比对数据发现没有差异，不执行修改


```

#### 二、改

```

```

#### 三、删

```

```

#### 四、查

```

```

#### 五、读取写入时字段控制

1、

2、

3、

4、

5、

#### 六、模型关联

